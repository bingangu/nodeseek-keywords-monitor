<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NodeSeek å…³é”®è¯ç›‘æ§é¢æ¿</title>
    <style>
      /*
         * Apple é£æ ¼è®¾è®¡ç³»ç»Ÿï¼ˆç®€çº¦ã€å…‹åˆ¶ã€å…³æ³¨å†…å®¹å±‚çº§ä¸å¯ç”¨æ€§ï¼‰
         * - ä½¿ç”¨ä¸­æ€§æµ…ç°èƒŒæ™¯ä¸æ¸…æ™°çš„åˆ†éš”çº¿
         * - å‡å°‘å¼ºçƒˆæ¸å˜ä¸å¤§å¹…åŠ¨æ•ˆï¼Œçªå‡ºæ’ç‰ˆä¸ç•™ç™½
         * - ä¿æŒåŠŸèƒ½ä¸ç»“æ„ä¸å˜ï¼Œä»…ä¼˜åŒ–è§†è§‰ä¸äº¤äº’
         */

      /* ========== åŸºç¡€è‰²æ¿ä¸å°ºå¯¸ï¼ˆæµ…è‰²ï¼‰ ========== */
      :root {
        /* è¯­ä¹‰è‰² */
        --accent: #0a84ff; /* iOS/Apple è“ */
        --accent-hover: #007aff;
        --success: #34c759; /* iOS æˆåŠŸç»¿ */
        --bg: #f5f5f7; /* Apple ç½‘ç«™å¸¸ç”¨èƒŒæ™¯ */
        --surface: rgba(255, 255, 255, 0.86);
        --surface-opaque: #ffffff;
        --text-primary: #1d1d1f; /* SF çš„æ·±è‰²æ­£æ–‡ */
        --text-secondary: #6e6e73;
        --border-color: rgba(0, 0, 0, 0.08);
        --divider: rgba(0, 0, 0, 0.06);
        --ring: rgba(10, 132, 255, 0.35);
        --highlight-bg: #fff2b3; /* æ¸©å’Œçš„é»„è‰²æ ‡æ³¨ */
        --highlight-fg: #6b5500;
        /* æµ®èµ·çš„æµ…è‰²è¡¨é¢ä¸Šçš„æ–‡æœ¬é¢œè‰²ï¼ˆè·¨æ·±æµ…æ¨¡å¼ä¿è¯å¯¹æ¯”ï¼‰ */
        --surface-contrast-text: #1d1d1f;
        /* æŒ‰é’®ï¼ˆæµ…è‰²ï¼‰ */
        --btn-primary-bg: var(--accent);
        --btn-primary-hover-bg: var(--accent-hover);
        --btn-primary-text: #ffffff;
        --btn-primary-shadow: 0 2px 10px rgba(10, 132, 255, 0.25);
        /* å…³é”®è¯èŠ¯ç‰‡ï¼ˆæµ…è‰²ï¼‰ */
        --chip-bg: #f2f2f7; /* iOS gray6 */
        --chip-text: var(--text-primary);
        --chip-border: rgba(0, 0, 0, 0.08);
        --chip-hover-bg: #eaeaef;

        /* é˜´å½±ï¼ˆæ›´å…‹åˆ¶ï¼‰ */
        --shadow-sm: 0 1px 4px rgba(0, 0, 0, 0.06);
        --shadow-md: 0 6px 18px rgba(0, 0, 0, 0.1);
        --shadow-lg: 0 12px 28px rgba(0, 0, 0, 0.12);

        /* åœ†è§’ä¸é—´è· */
        --radius-lg: 18px;
        --radius-md: 14px;
        --radius-sm: 10px;
        --radius-btn: 12px;
        --gap-lg: 28px;
        --gap-md: 20px;
        --gap-sm: 12px;
      }

      /* ========== æ·±è‰²æ¨¡å¼ï¼ˆç³»ç»Ÿåå¥½ï¼‰ ========== */
      @media (prefers-color-scheme: dark) {
        :root {
          --bg: #0c0c0d;
          --surface: rgba(28, 28, 30, 0.75);
          --surface-opaque: #1c1c1e;
          --text-primary: #f5f5f7;
          --text-secondary: #b3b3b5;
          --border-color: rgba(255, 255, 255, 0.12);
          --divider: rgba(255, 255, 255, 0.1);
          --ring: rgba(10, 132, 255, 0.45);
          --highlight-bg: #4d3b00;
          --highlight-fg: #ffd60a;
          /* åœ¨æ·±è‰²æ¨¡å¼ä¸‹ï¼Œæµ…è‰²æ°”æ³¡ä¸­çš„æ–‡æœ¬éœ€è¦æ·±è‰²ä»¥ä¿è¯å¯è¯»æ€§ */
          --surface-contrast-text: #111111;
          /* æŒ‰é’®ï¼ˆæ·±è‰²ï¼Œé™ä½é¥±å’Œåº¦ï¼ŒTinted é£æ ¼ï¼‰ */
          --btn-primary-bg: rgba(10, 132, 255, 0.22);
          --btn-primary-hover-bg: rgba(10, 132, 255, 0.28);
          --btn-primary-text: #e8f2ff;
          --btn-primary-shadow: 0 2px 8px rgba(10, 132, 255, 0.18);
          /* å…³é”®è¯èŠ¯ç‰‡ï¼ˆæ·±è‰²ï¼‰ */
          --chip-bg: #2c2c2e; /* iOS gray4 */
          --chip-text: #f5f5f7;
          --chip-border: rgba(255, 255, 255, 0.14);
          --chip-hover-bg: #3a3a3c;

          --shadow-sm: 0 1px 4px rgba(0, 0, 0, 0.35);
          --shadow-md: 0 8px 22px rgba(0, 0, 0, 0.45);
          --shadow-lg: 0 16px 40px rgba(0, 0, 0, 0.5);
        }
      }

      /* ========== åŠ¨ç”»åå¥½ï¼ˆå‡å°‘åŠ¨ç”»ï¼‰ ========== */
      @media (prefers-reduced-motion: reduce) {
        * {
          animation: none !important;
          transition: none !important;
        }
      }

      /* ========== å…¨å±€åŸºç¡€ ========== */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display",
          "SF Pro Text", "Helvetica Neue", "PingFang SC", "Hiragino Sans GB",
          sans-serif;
        background: radial-gradient(
          1200px 800px at 10% -10%,
          #ffffff 0%,
          var(--bg) 60%
        );
        background-attachment: fixed;
        color: var(--text-primary);
        line-height: 1.6;
        padding: 40px 20px;
        min-height: 100vh;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
      }

      /* é¡¶éƒ¨åŒºå—ä¸æ ‡é¢˜ */
      header {
        text-align: center;
        margin-bottom: 48px;
      }
      h1 {
        font-size: 3rem;
        font-weight: 700;
        color: var(--text-primary);
        letter-spacing: -0.03em;
        margin-bottom: 12px;
      }
      .subtitle {
        color: var(--text-secondary);
        font-size: 1.12rem;
        font-weight: 400;
      }

      /* å¡ç‰‡/é¢æ¿ */
      .control-panel {
        background: var(--surface);
        -webkit-backdrop-filter: blur(12px);
        backdrop-filter: blur(12px);
        border-radius: var(--radius-lg);
        padding: 28px;
        margin-bottom: 24px;
        box-shadow: var(--shadow-sm);
        border: 1px solid var(--border-color);
      }

      .section-title {
        font-size: 1.35rem;
        margin-bottom: var(--gap-md);
        color: var(--text-primary);
        font-weight: 600;
        letter-spacing: -0.02em;
      }

      /* è¾“å…¥ä¸æŒ‰é’® */
      .keyword-input-group {
        display: flex;
        gap: var(--gap-sm);
        margin-bottom: var(--gap-md);
      }

      #keywordInput {
        flex: 1;
        padding: 14px 16px;
        border: 1px solid var(--border-color);
        border-radius: var(--radius-btn);
        font-size: 1.02rem;
        transition: background-color 0.2s ease, border-color 0.2s ease,
          box-shadow 0.2s ease, transform 0.1s ease;
        background: var(--surface-opaque);
        color: var(--text-primary);
      }
      #keywordInput::placeholder {
        color: var(--text-secondary);
      }
      #keywordInput:focus {
        outline: none;
        border-color: var(--accent);
        box-shadow: 0 0 0 3px var(--ring);
      }

      .btn {
        padding: 14px 22px;
        border: none;
        border-radius: var(--radius-btn);
        font-size: 1.02rem;
        cursor: pointer;
        transition: background-color 0.2s ease, box-shadow 0.2s ease,
          transform 0.1s ease, color 0.2s ease;
        font-weight: 600;
        letter-spacing: -0.01em;
      }
      .btn:focus-visible {
        outline: none;
        box-shadow: 0 0 0 3px var(--ring);
      }

      .btn-primary {
        background: var(--btn-primary-bg);
        color: var(--btn-primary-text);
        box-shadow: var(--btn-primary-shadow);
      }
      .btn-primary:hover:not(:disabled) {
        background: var(--btn-primary-hover-bg);
      }
      .btn-primary:active:not(:disabled) {
        transform: translateY(0);
      }
      .btn-primary:disabled {
        opacity: 0.55;
        cursor: not-allowed;
        box-shadow: none;
      }

      .btn-refresh {
        background: var(--btn-primary-bg);
        color: var(--btn-primary-text);
        width: 100%;
        padding: 16px;
        font-size: 1.06rem;
        box-shadow: var(--btn-primary-shadow);
      }
      .btn-refresh:hover:not(:disabled) {
        background: var(--btn-primary-hover-bg);
      }
      .btn-refresh:active:not(:disabled) {
        transform: translateY(0);
      }
      .btn-refresh:disabled {
        opacity: 0.45;
        cursor: not-allowed;
        box-shadow: none;
      }

      /* å…³é”®è¯æ ‡ç­¾ */
      .keywords-container {
        display: flex;
        flex-wrap: wrap;
        gap: var(--gap-sm);
        min-height: 56px;
        padding: 16px;
        background: rgba(255, 255, 255, 0.5);
        -webkit-backdrop-filter: blur(8px);
        backdrop-filter: blur(8px);
        border-radius: var(--radius-md);
        margin-bottom: var(--gap-md);
        border: 1px solid var(--divider);
      }
      .keyword-tag {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        padding: 8px 14px;
        background: var(--chip-bg);
        color: var(--chip-text);
        border-radius: var(--radius-sm);
        font-size: 0.98rem;
        font-weight: 500;
        border: 1px solid var(--chip-border);
        transition: background-color 0.2s ease, box-shadow 0.2s ease,
          transform 0.1s ease;
      }
      .keyword-tag:hover {
        background: var(--chip-hover-bg);
        border-color: var(--border-color);
      }
      .keyword-tag .remove-btn {
        background: rgba(0, 0, 0, 0.06);
        border: none;
        color: var(--text-secondary);
        width: 22px;
        height: 22px;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1rem;
        font-weight: 700;
        transition: background-color 0.2s ease, transform 0.1s ease;
      }
      .keyword-tag .remove-btn:hover {
        background: rgba(0, 0, 0, 0.1);
        color: var(--accent);
      }

      .empty-keywords {
        color: var(--text-secondary);
        font-size: 0.98rem;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
      }

      /* åŠ è½½çŠ¶æ€ */
      .loading {
        text-align: center;
        padding: 56px;
      }
      .spinner {
        display: inline-block;
        width: 42px;
        height: 42px;
        border: 3px solid rgba(0, 0, 0, 0.08);
        border-top-color: var(--accent);
        border-radius: 50%;
        animation: spin 0.8s linear infinite;
        margin-bottom: 16px;
      }
      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }
      .loading div {
        color: var(--text-secondary);
        font-size: 1.02rem;
        font-weight: 500;
      }

      /* åˆ—è¡¨ä¸å¡ç‰‡ */
      .posts-container {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));
        gap: 22px;
      }
      .post-card {
        background: var(--surface-opaque);
        border-radius: 16px;
        padding: 24px;
        box-shadow: var(--shadow-sm);
        border: 1px solid var(--border-color);
        transition: box-shadow 0.25s ease, transform 0.2s ease,
          background-color 0.2s ease;
      }
      .post-card:hover {
        transform: translateY(-4px);
        box-shadow: var(--shadow-md);
      }

      .post-title {
        font-size: 1.22rem;
        margin-bottom: 12px;
        line-height: 1.5;
      }
      .post-title a {
        color: var(--text-primary);
        text-decoration: none;
        font-weight: 700;
        letter-spacing: -0.01em;
        transition: color 0.2s ease, text-decoration-color 0.2s ease;
      }
      .post-title a:hover {
        color: var(--accent);
        text-decoration: underline;
        text-underline-offset: 3px;
      }

      .post-meta {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        margin-bottom: 12px;
        font-size: 0.94rem;
        color: var(--text-secondary);
      }
      .post-meta-item {
        display: flex;
        align-items: center;
        gap: 6px;
      }

      .post-description {
        color: var(--text-primary);
        line-height: 1.7;
        overflow-wrap: break-word;
      }

      .highlight {
        background: var(--highlight-bg);
        padding: 2px 6px;
        border-radius: 6px;
        font-weight: 600;
        color: var(--highlight-fg);
      }

      /* ç»Ÿè®¡ä¸ç©ºçŠ¶æ€ */
      .stats {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: var(--gap-md);
        padding: 16px 18px;
        background: var(--surface);
        -webkit-backdrop-filter: blur(10px);
        backdrop-filter: blur(10px);
        border-radius: 14px;
        border: 1px solid var(--border-color);
        box-shadow: var(--shadow-sm);
      }
      .stats-item {
        font-size: 1rem;
        color: var(--text-secondary);
      }
      .stats-item strong {
        color: var(--text-primary);
        font-size: 1.28rem;
        margin-right: 6px;
        font-weight: 800;
      }

      .empty-state {
        text-align: center;
        padding: 64px 32px;
        background: var(--surface);
        -webkit-backdrop-filter: blur(12px);
        backdrop-filter: blur(12px);
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow-md);
        border: 1px solid var(--border-color);
      }
      .empty-state-icon {
        font-size: 4rem;
        margin-bottom: 18px;
      }
      .empty-state-title {
        font-size: 1.6rem;
        margin-bottom: 10px;
        color: var(--text-primary);
        font-weight: 700;
        letter-spacing: -0.02em;
      }
      .empty-state-text {
        color: var(--text-secondary);
        font-size: 1.06rem;
        line-height: 1.6;
      }

      /* è‡ªåŠ¨åˆ·æ–°å¼€å…³ */
      .auto-refresh-control {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-top: var(--gap-md);
        padding: 16px 18px;
        background: rgba(255, 255, 255, 0.55);
        -webkit-backdrop-filter: blur(8px);
        backdrop-filter: blur(8px);
        border-radius: var(--radius-md);
        flex-wrap: wrap;
        gap: 14px;
        border: 1px solid var(--divider);
      }
      .auto-refresh-toggle {
        display: flex;
        align-items: center;
        gap: 12px;
        font-size: 1.02rem;
        color: var(--text-primary);
        font-weight: 500;
      }

      .switch {
        position: relative;
        display: inline-block;
        width: 54px;
        height: 30px;
      }
      .switch input {
        opacity: 0;
        width: 0;
        height: 0;
      }
      .slider {
        position: absolute;
        cursor: pointer;
        inset: 0;
        background: rgba(0, 0, 0, 0.12);
        transition: 0.25s ease;
        border-radius: 30px;
      }
      .slider:before {
        position: absolute;
        content: "";
        height: 24px;
        width: 24px;
        left: 3px;
        bottom: 3px;
        background-color: #fff;
        transition: 0.25s ease;
        border-radius: 50%;
        box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);
      }
      input:checked + .slider {
        background: linear-gradient(135deg, var(--success), #2db24f);
      }
      input:checked + .slider:before {
        transform: translateX(24px);
      }

      .countdown {
        display: none; /* é»˜è®¤éšè—ï¼Œé€šè¿‡ JS æ§åˆ¶æ˜¾ç¤º */
        align-items: center;
        gap: 8px;
        font-size: 0.98rem;
        color: var(--surface-contrast-text);
        padding: 8px 14px;
        background: rgba(255, 255, 255, 0.75);
        -webkit-backdrop-filter: blur(8px);
        backdrop-filter: blur(8px);
        border-radius: 999px;
        border: 1px solid rgba(0, 0, 0, 0.06);
      }
      .countdown.active {
        display: flex; /* æ¿€æ´»æ—¶æ˜¾ç¤ºä¸º flex å¸ƒå±€ */
      }
      .countdown-time {
        font-weight: 800;
        color: var(--accent);
        font-family: "SF Mono", "Courier New", monospace;
        font-size: 1.06rem;
      }

      /* å“åº”å¼ */
      @media (max-width: 768px) {
        h1 {
          font-size: 2.4rem;
        }
        .posts-container {
          grid-template-columns: 1fr;
        }
        .control-panel {
          padding: 22px;
        }
        .keyword-input-group {
          flex-direction: column;
        }
        .stats {
          flex-direction: column;
          gap: 10px;
          text-align: center;
        }
        .auto-refresh-control {
          justify-content: center;
        }
      }

      /* é¡µè„š */
      footer {
        text-align: center;
        margin-top: 56px;
        padding: 24px 20px;
        color: rgba(0, 0, 0, 0.55);
        font-size: 0.98rem;
      }
      footer a {
        color: var(--text-primary);
        text-decoration: none;
        font-weight: 600;
        transition: color 0.2s ease;
      }
      footer a:hover {
        color: var(--accent);
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>ğŸ“¡ &nbsp;NodeSeek å…³é”®è¯ç›‘æ§é¢æ¿</h1>
        <p class="subtitle">å¸®åŠ©æ‚¨ç­›é€‰æƒ³è¦å…³æ³¨çš„å†…å®¹</p>
      </header>

      <div class="control-panel">
        <h2 class="section-title">ğŸ·ï¸ å…³é”®è¯ç®¡ç†</h2>
        <div class="keyword-input-group">
          <input
            type="text"
            id="keywordInput"
            placeholder="è¾“å…¥å…³é”®è¯åæŒ‰å›è½¦æˆ–ç‚¹å‡»æ·»åŠ ..."
            autocomplete="off"
          />
          <button class="btn btn-primary" id="addKeywordBtn">æ·»åŠ å…³é”®è¯</button>
        </div>
        <div id="keywordsContainer" class="keywords-container">
          <span class="empty-keywords">è¿˜æ²¡æœ‰æ·»åŠ ä»»ä½•å…³é”®è¯</span>
        </div>
        <button class="btn btn-refresh" id="refreshBtn">ğŸ”„ åˆ·æ–°å¸–å­</button>
        <div class="auto-refresh-control">
          <div class="auto-refresh-toggle">
            <label class="switch">
              <input
                type="checkbox"
                id="autoRefreshToggle"
                aria-label="è‡ªåŠ¨åˆ·æ–°å¼€å…³"
              />
              <span class="slider"></span>
            </label>
            <span>â±ï¸ è‡ªåŠ¨åˆ·æ–°ï¼ˆæ¯ 1 åˆ†é’Ÿï¼‰</span>
          </div>
          <div class="countdown" id="countdownDisplay">
            <span>ä¸‹æ¬¡åˆ·æ–°ï¼š</span>
            <span class="countdown-time" id="countdownTime">60</span>
            <span>ç§’</span>
          </div>
        </div>
      </div>

      <div id="statsContainer"></div>
      <div id="postsContainer"></div>
    </div>

    <script>
      // ============== å¸¸é‡å®šä¹‰ ==============
      const RSS_URL = "https://rss.nodeseek.com/";

      // ä¼˜å…ˆä½¿ç”¨è‡ªå·±çš„åç«¯API,å¦‚æœåç«¯ä¸å¯ç”¨åˆ™é™çº§åˆ°ç¬¬ä¸‰æ–¹ä»£ç†
      // éƒ¨ç½²åˆ° Vercel å,ä¼šè‡ªåŠ¨ä½¿ç”¨åŒåŸŸåçš„ /api/rss ç«¯ç‚¹
      const USE_OWN_BACKEND = true; // æ˜¯å¦ä¼˜å…ˆä½¿ç”¨è‡ªå·±çš„åç«¯
      const BACKEND_API_URL = "/api/rss"; // è‡ªå·±çš„åç«¯APIåœ°å€(ç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„)

      // å¤‡ç”¨çš„ç¬¬ä¸‰æ–¹ CORS ä»£ç†(å½“åç«¯ä¸å¯ç”¨æ—¶ä½¿ç”¨)
      const FALLBACK_CORS_PROXIES = [
        "https://api.allorigins.win/raw?url=",
        "https://corsproxy.io/?",
        "https://api.codetabs.com/v1/proxy?quest=",
        "https://cors-anywhere.herokuapp.com/",
        "https://thingproxy.freeboard.io/fetch/",
        "https://cors.eu.org/",
      ];
      const STORAGE_KEY = "rss_keywords";
      const NOTIFIED_POSTS_KEY = "rss_notified_posts"; // ç”¨äº localStorage çš„é”®

      // å½“å‰ä½¿ç”¨çš„ä»£ç†ç´¢å¼•
      let currentProxyIndex = 0;

      // ============== DOM å…ƒç´  ==============
      const keywordInput = document.getElementById("keywordInput");
      const addKeywordBtn = document.getElementById("addKeywordBtn");
      const keywordsContainer = document.getElementById("keywordsContainer");
      const refreshBtn = document.getElementById("refreshBtn");
      const postsContainer = document.getElementById("postsContainer");
      const statsContainer = document.getElementById("statsContainer");
      const autoRefreshToggle = document.getElementById("autoRefreshToggle");
      const countdownDisplay = document.getElementById("countdownDisplay");
      const countdownTime = document.getElementById("countdownTime");

      // ============== å…¨å±€çŠ¶æ€ ==============
      let keywords = [];
      let allPosts = [];
      let notifiedPostIds = new Set(); // å­˜å‚¨å·²å‘é€è¿‡é€šçŸ¥çš„å¸–å­é“¾æ¥

      // è‡ªåŠ¨åˆ·æ–°ç›¸å…³
      const AUTO_REFRESH_INTERVAL = 60; // 60 ç§’
      let countdownTimer = null;
      let remainingSeconds = AUTO_REFRESH_INTERVAL;
      let isFetching = false; // é˜²æ­¢å¹¶å‘è¯·æ±‚çš„æ ‡å¿—
      let isAutoRefreshTriggered = false; // æ ‡è®°æ˜¯å¦ä¸ºè‡ªåŠ¨åˆ·æ–°è§¦å‘

      // ============== å…³é”®è¯ç®¡ç† ==============

      /**
       * ä» localStorage åŠ è½½å…³é”®è¯
       */
      function loadKeywords() {
        try {
          const stored = localStorage.getItem(STORAGE_KEY);
          if (stored) {
            keywords = JSON.parse(stored);
          }
        } catch (error) {
          console.error("åŠ è½½å…³é”®è¯å¤±è´¥:", error);
          keywords = [];
        }
        renderKeywords();
      }

      /**
       * ä¿å­˜å…³é”®è¯åˆ° localStorage
       */
      function saveKeywords() {
        try {
          localStorage.setItem(STORAGE_KEY, JSON.stringify(keywords));
        } catch (error) {
          console.error("ä¿å­˜å…³é”®è¯å¤±è´¥:", error);
        }
      }

      /**
       * ä» localStorage åŠ è½½å·²é€šçŸ¥çš„å¸–å­ ID
       */
      function loadNotifiedPostIds() {
        try {
          const stored = localStorage.getItem(NOTIFIED_POSTS_KEY);
          if (stored) {
            notifiedPostIds = new Set(JSON.parse(stored));
          }
        } catch (error) {
          console.error("åŠ è½½å·²é€šçŸ¥å¸–å­åˆ—è¡¨å¤±è´¥:", error);
          notifiedPostIds = new Set();
        }
      }

      /**
       * ä¿å­˜å·²é€šçŸ¥çš„å¸–å­ ID åˆ° localStorage
       */
      function saveNotifiedPostIds() {
        try {
          localStorage.setItem(
            NOTIFIED_POSTS_KEY,
            JSON.stringify(Array.from(notifiedPostIds))
          );
        } catch (error) {
          console.error("ä¿å­˜å·²é€šçŸ¥å¸–å­åˆ—è¡¨å¤±è´¥:", error);
        }
      }

      /**
       * æ·»åŠ å…³é”®è¯
       */
      function addKeyword() {
        const keyword = keywordInput.value.trim();

        if (!keyword) {
          alert("è¯·è¾“å…¥å…³é”®è¯");
          return;
        }

        if (keywords.includes(keyword)) {
          alert("è¯¥å…³é”®è¯å·²å­˜åœ¨");
          return;
        }

        keywords.push(keyword);
        saveKeywords();
        renderKeywords();
        keywordInput.value = "";
        keywordInput.focus();
      }

      /**
       * åˆ é™¤å…³é”®è¯
       */
      function removeKeyword(keyword) {
        keywords = keywords.filter((k) => k !== keyword);
        saveKeywords();
        renderKeywords();
      }

      /**
       * æ›´æ–°åˆ·æ–°æŒ‰é’®çŠ¶æ€
       */
      function updateRefreshButtonState() {
        // åªæœ‰æ·»åŠ äº†å…³é”®è¯æ‰èƒ½åˆ·æ–°
        const hasKeywords = keywords.length > 0;
        refreshBtn.disabled = !hasKeywords;

        // å¦‚æœæ²¡æœ‰å…³é”®è¯ï¼Œä¹Ÿç¦ç”¨è‡ªåŠ¨åˆ·æ–°
        if (!hasKeywords && autoRefreshToggle.checked) {
          autoRefreshToggle.checked = false;
          stopAutoRefresh();
        }
      }

      /**
       * æ¸²æŸ“å…³é”®è¯æ ‡ç­¾
       */
      function renderKeywords() {
        if (keywords.length === 0) {
          keywordsContainer.innerHTML =
            '<span class="empty-keywords">è¿˜æ²¡æœ‰æ·»åŠ ä»»ä½•å…³é”®è¯</span>';
        } else {
          keywordsContainer.innerHTML = keywords
            .map(
              (keyword, index) => `
                    <div class="keyword-tag">
                        <span>${escapeHtml(keyword)}</span>
                        <button class="remove-btn" data-keyword-index="${index}">Ã—</button>
                    </div>
                `
            )
            .join("");
        }

        // æ›´æ–°åˆ·æ–°æŒ‰é’®çŠ¶æ€
        updateRefreshButtonState();
      }

      // ============== RSS æ•°æ®è·å–ä¸è§£æ ==============

      /**
       * å°è¯•ä»è‡ªå·±çš„åç«¯APIè·å–RSSæ•°æ®
       */
      async function fetchFromOwnBackend() {
        const response = await fetch(BACKEND_API_URL, {
          signal: AbortSignal.timeout(10000), // 10ç§’è¶…æ—¶
        });

        if (!response.ok) {
          throw new Error(`HTTP é”™è¯¯! çŠ¶æ€: ${response.status}`);
        }

        return await response.text();
      }

      /**
       * ä½¿ç”¨å•ä¸ªç¬¬ä¸‰æ–¹ä»£ç†å°è¯•è·å–RSSæ•°æ®
       */
      async function fetchWithProxy(proxyUrl) {
        const response = await fetch(proxyUrl + encodeURIComponent(RSS_URL), {
          signal: AbortSignal.timeout(10000), // 10ç§’è¶…æ—¶
        });

        if (!response.ok) {
          throw new Error(`HTTP é”™è¯¯! çŠ¶æ€: ${response.status}`);
        }

        return await response.text();
      }

      /**
       * è·å–å¹¶è§£æ RSS æ•°æ®ï¼ˆä¼˜å…ˆä½¿ç”¨è‡ªå·±çš„åç«¯,å¤±è´¥æ—¶é™çº§åˆ°ç¬¬ä¸‰æ–¹ä»£ç†ï¼‰
       */
      async function fetchRSS() {
        // é˜²æ­¢å¹¶å‘è¯·æ±‚
        if (isFetching) {
          return;
        }

        try {
          isFetching = true;

          // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
          showLoading();

          // ç¦ç”¨åˆ·æ–°æŒ‰é’®
          refreshBtn.disabled = true;
          refreshBtn.textContent = "â³ åŠ è½½ä¸­...";

          let xmlText = null;
          let lastError = null;
          let successProxyIndex = -1;

          // ç­–ç•¥1: ä¼˜å…ˆå°è¯•è‡ªå·±çš„åç«¯API
          if (USE_OWN_BACKEND) {
            try {
              console.log("ğŸš€ å°è¯•ä½¿ç”¨è‡ªå·±çš„åç«¯API:", BACKEND_API_URL);
              xmlText = await fetchFromOwnBackend();
              console.log("âœ“ è‡ªå·±çš„åç«¯APIæˆåŠŸ");
            } catch (error) {
              console.warn("âœ— è‡ªå·±çš„åç«¯APIå¤±è´¥:", error.message);
              console.log("âš ï¸ é™çº§åˆ°ç¬¬ä¸‰æ–¹ä»£ç†...");
              lastError = error;
            }
          }

          // ç­–ç•¥2: å¦‚æœåç«¯å¤±è´¥,å°è¯•ç¬¬ä¸‰æ–¹ä»£ç†
          if (!xmlText) {
            for (let i = 0; i < FALLBACK_CORS_PROXIES.length; i++) {
              const proxyIndex =
                (currentProxyIndex + i) % FALLBACK_CORS_PROXIES.length;
              const proxyUrl = FALLBACK_CORS_PROXIES[proxyIndex];

              try {
                console.log(
                  `å°è¯•ä½¿ç”¨ç¬¬ä¸‰æ–¹ä»£ç† ${proxyIndex + 1}/${
                    FALLBACK_CORS_PROXIES.length
                  }: ${proxyUrl}`
                );
                xmlText = await fetchWithProxy(proxyUrl);
                successProxyIndex = proxyIndex;
                console.log(`âœ“ ç¬¬ä¸‰æ–¹ä»£ç† ${proxyIndex + 1} æˆåŠŸ`);
                break; // æˆåŠŸåˆ™è·³å‡ºå¾ªç¯
              } catch (error) {
                console.warn(
                  `âœ— ç¬¬ä¸‰æ–¹ä»£ç† ${proxyIndex + 1} å¤±è´¥:`,
                  error.message
                );
                lastError = error;
                // ç»§ç»­å°è¯•ä¸‹ä¸€ä¸ªä»£ç†
              }
            }
          }

          // æ‰€æœ‰æ–¹æ³•éƒ½å¤±è´¥
          if (!xmlText) {
            throw new Error(
              `æ‰€æœ‰è·å–æ–¹å¼å‡å¤±è´¥ã€‚æœ€åé”™è¯¯: ${
                lastError?.message || "æœªçŸ¥é”™è¯¯"
              }`
            );
          }

          // æ›´æ–°å½“å‰ä½¿ç”¨çš„ä»£ç†ç´¢å¼•ï¼ˆä¸‹æ¬¡ä¼˜å…ˆä½¿ç”¨æˆåŠŸçš„ä»£ç†ï¼‰
          if (successProxyIndex >= 0) {
            currentProxyIndex = successProxyIndex;
          }

          // ä½¿ç”¨ DOMParser è§£æ XML
          const parser = new DOMParser();
          const xmlDoc = parser.parseFromString(xmlText, "text/xml");

          // æ£€æŸ¥è§£æé”™è¯¯
          const parseError = xmlDoc.querySelector("parsererror");
          if (parseError) {
            throw new Error("XML è§£æå¤±è´¥");
          }

          // æå–æ‰€æœ‰ item å…ƒç´ 
          const items = xmlDoc.querySelectorAll("item");

          allPosts = Array.from(items).map((item) => {
            return {
              title: getElementText(item, "title"),
              link: getElementText(item, "link"),
              description: getElementText(item, "description"),
              author:
                getElementText(item, "dc\\:creator") ||
                getElementText(item, "creator") ||
                "æœªçŸ¥ä½œè€…",
              pubDate: getElementText(item, "pubDate"),
            };
          });

          // ç­›é€‰ã€æ¸²æŸ“å¹¶å¤„ç†é€šçŸ¥
          filterAndRenderPosts();
        } catch (error) {
          console.error("è·å– RSS å¤±è´¥:", error);
          postsContainer.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">âš ï¸</div>
                        <div class="empty-state-title">è·å–æ•°æ®å¤±è´¥</div>
                        <div class="empty-state-text">é”™è¯¯ä¿¡æ¯: ${escapeHtml(
                          error.message
                        )}</div>
                        <div class="empty-state-text" style="margin-top: 10px;">å·²å°è¯•æ‰€æœ‰è·å–æ–¹å¼ï¼Œè¯·ç¨åé‡è¯•</div>
                    </div>
                `;
          statsContainer.innerHTML = "";
        } finally {
          // é‡ç½®è·å–æ ‡å¿—
          isFetching = false;

          // æ¢å¤åˆ·æ–°æŒ‰é’®ï¼ˆå–å†³äºæ˜¯å¦æœ‰å…³é”®è¯ï¼‰
          updateRefreshButtonState();
          refreshBtn.textContent = "ğŸ”„ åˆ·æ–°å¸–å­";

          // å¦‚æœè‡ªåŠ¨åˆ·æ–°å·²å¯ç”¨ï¼Œé‡ç½®å€’è®¡æ—¶
          if (autoRefreshToggle.checked) {
            remainingSeconds = AUTO_REFRESH_INTERVAL;
            countdownTime.textContent = remainingSeconds;
          }

          // åœ¨ä»»åŠ¡æœ€åé‡ç½®è‡ªåŠ¨åˆ·æ–°æ ‡å¿—ï¼Œç¡®ä¿é€šçŸ¥é€»è¾‘èƒ½æ­£ç¡®åˆ¤æ–­
          isAutoRefreshTriggered = false;
        }
      }

      /**
       * ä» XML å…ƒç´ ä¸­æå–æ–‡æœ¬å†…å®¹
       */
      function getElementText(parent, tagName) {
        const element = parent.querySelector(tagName);
        return element ? element.textContent.trim() : "";
      }

      // ============== å¸–å­ç­›é€‰ä¸æ¸²æŸ“ ==============

      /**
       * ç­›é€‰ã€æ¸²æŸ“å¸–å­ï¼Œå¹¶è§¦å‘é€šçŸ¥æ£€æŸ¥
       */
      function filterAndRenderPosts() {
        let matchedPosts = [];

        // 1. å¦‚æœæœ‰å…³é”®è¯ï¼Œè¿›è¡Œç­›é€‰
        if (keywords.length > 0) {
          matchedPosts = allPosts.filter((post) => {
            const searchText = (
              post.title +
              " " +
              post.description
            ).toLowerCase();
            return keywords.some((keyword) =>
              searchText.includes(keyword.toLowerCase())
            );
          });
        }

        // 2. æ£€æŸ¥æ˜¯å¦æœ‰éœ€è¦å‘é€é€šçŸ¥çš„æ–°åŒ¹é…å¸–å­
        //    è¿™ä¸ªæ£€æŸ¥åªåœ¨è‡ªåŠ¨åˆ·æ–°æ—¶è§¦å‘ï¼Œä»¥é¿å…æ‰‹åŠ¨åˆ·æ–°æ—¶å¼¹å‡ºé€šçŸ¥
        if (isAutoRefreshTriggered) {
          checkForNewMatchesAndNotify(matchedPosts);
        }

        // 3. æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯
        renderStats(matchedPosts.length, allPosts.length);

        // 4. æ¸²æŸ“å¸–å­
        if (matchedPosts.length === 0) {
          if (allPosts.length === 0 && !isFetching) {
            postsContainer.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-state-icon">ğŸ“­</div>
                            <div class="empty-state-title">æš‚æ— æ•°æ®</div>
                            <div class="empty-state-text">ç‚¹å‡»"åˆ·æ–°å¸–å­"æŒ‰é’®è·å–æœ€æ–°å†…å®¹</div>
                        </div>
                    `;
          } else {
            postsContainer.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-state-icon">ğŸ”</div>
                            <div class="empty-state-title">æœªæ‰¾åˆ°åŒ¹é…çš„å¸–å­</div>
                            <div class="empty-state-text">è¯·å°è¯•è°ƒæ•´å…³é”®è¯æˆ–æ·»åŠ æ–°çš„å…³é”®è¯</div>
                        </div>
                    `;
          }
        } else {
          postsContainer.innerHTML = `
                    <div class="posts-container">
                        ${matchedPosts.map((post) => renderPost(post)).join("")}
                    </div>
                `;
        }
      }

      /**
       * æ£€æŸ¥åŒ¹é…çš„å¸–å­ä¸­æ˜¯å¦æœ‰æ–°å†…å®¹ï¼Œå¹¶å‘é€é€šçŸ¥
       */
      function checkForNewMatchesAndNotify(matchedPosts) {
        if (
          Notification.permission !== "granted" ||
          matchedPosts.length === 0
        ) {
          return;
        }

        // æ‰¾å‡ºæœ¬æ¬¡åŒ¹é…çš„ã€ä½†ä»æœªå‘é€è¿‡é€šçŸ¥çš„å¸–å­
        const newPostsToNotify = matchedPosts.filter(
          (post) => !notifiedPostIds.has(post.link)
        );

        if (newPostsToNotify.length > 0) {
          // å‘é€é€šçŸ¥
          const firstPost = newPostsToNotify[0];
          const title = `ğŸ”” å‘ç° ${newPostsToNotify.length} ç¯‡æ–°åŒ¹é…å¸–å­`;
          const body = `æœ€æ–°ï¼š${firstPost.title.substring(0, 60)}${
            firstPost.title.length > 60 ? "..." : ""
          }`;
          sendNotification(title, body, firstPost.link);

          // å°†è¿™äº›æ–°é€šçŸ¥è¿‡çš„å¸–å­é“¾æ¥åŠ å…¥é›†åˆï¼Œå¹¶ä¿å­˜
          newPostsToNotify.forEach((post) => notifiedPostIds.add(post.link));
          saveNotifiedPostIds();
        }
      }

      /**
       * æ¸²æŸ“å•ä¸ªå¸–å­å¡ç‰‡
       */
      function renderPost(post) {
        // é«˜äº®å¤„ç†
        const highlightedTitle = highlightKeywords(post.title);
        const highlightedDescription = highlightKeywords(post.description);

        // æ ¼å¼åŒ–æ—¥æœŸ
        const formattedDate = formatDate(post.pubDate);

        return `
                <div class="post-card">
                    <div class="post-title">
                        <a href="${escapeHtml(
                          post.link
                        )}" target="_blank" rel="noopener noreferrer">
                            ${highlightedTitle}
                        </a>
                    </div>
                    <div class="post-meta">
                        <span class="post-meta-item">${escapeHtml(
                          post.author
                        )}</span>
                        <span class="post-meta-item">${formattedDate}</span>
                    </div>
                    <div class="post-description">
                        ${highlightedDescription}
                    </div>
                </div>
            `;
      }

      /**
       * åœ¨æ–‡æœ¬ä¸­é«˜äº®å…³é”®è¯
       */
      function highlightKeywords(text) {
        if (keywords.length === 0) {
          return escapeHtml(text);
        }

        let result = escapeHtml(text);

        // ä¸ºæ¯ä¸ªå…³é”®è¯åˆ›å»ºé«˜äº®
        keywords.forEach((keyword) => {
          const escapedKeyword = escapeRegExp(keyword);
          const regex = new RegExp(`(${escapedKeyword})`, "gi");
          result = result.replace(regex, '<span class="highlight">$1</span>');
        });

        return result;
      }

      /**
       * æ¸²æŸ“ç»Ÿè®¡ä¿¡æ¯
       */
      function renderStats(filtered, total) {
        if (total === 0) {
          statsContainer.innerHTML = "";
          return;
        }

        const keywordInfo =
          keywords.length > 0
            ? `<span class="stats-item"><strong>${keywords.length}</strong> ä¸ªå…³é”®è¯</span>`
            : "";

        statsContainer.innerHTML = `
                <div class="stats">
                    <span class="stats-item"><strong>${filtered}</strong> ç¯‡åŒ¹é…</span>
                    ${keywordInfo}
                    <span class="stats-item">å…± <strong>${total}</strong> ç¯‡å¸–å­</span>
                </div>
            `;
      }

      /**
       * æ˜¾ç¤ºåŠ è½½çŠ¶æ€
       */
      function showLoading() {
        postsContainer.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    <div>æ­£åœ¨åŠ è½½ RSS æ•°æ®...</div>
                </div>
            `;
        statsContainer.innerHTML = "";
      }

      // ============== æµè§ˆå™¨é€šçŸ¥åŠŸèƒ½ ==============

      /**
       * è¯·æ±‚æµè§ˆå™¨é€šçŸ¥æƒé™
       */
      async function requestNotificationPermission() {
        if (!("Notification" in window)) {
          console.log("æ­¤æµè§ˆå™¨ä¸æ”¯æŒæ¡Œé¢é€šçŸ¥");
          return false;
        }

        if (Notification.permission === "granted") {
          return true;
        }

        if (Notification.permission !== "denied") {
          const permission = await Notification.requestPermission();
          return permission === "granted";
        }

        return false;
      }

      /**
       * å‘é€æµè§ˆå™¨é€šçŸ¥
       */
      function sendNotification(title, body, link) {
        if (Notification.permission === "granted") {
          // ä½¿ç”¨ Data URL å°† Emoji è½¬æ¢ä¸ºæœ‰æ•ˆçš„å›¾æ ‡æºï¼Œä¿®å¤ 404 é”™è¯¯
          const iconUrl =
            "data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ“¡</text></svg>";
          const badgeUrl =
            "data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ””</text></svg>";

          const notification = new Notification(title, {
            body: body,
            icon: iconUrl,
            badge: badgeUrl,
            tag: "rss-monitor",
            requireInteraction: true,
            silent: false,
          });

          // ç‚¹å‡»é€šçŸ¥æ—¶æ‰“å¼€é“¾æ¥ï¼ˆå¦‚æœæä¾›äº†ï¼‰
          if (link) {
            notification.onclick = function () {
              window.open(link, "_blank");
              notification.close();
            };
          }

          // 10ç§’åè‡ªåŠ¨å…³é—­
          setTimeout(() => notification.close(), 10000);
        }
      }

      // ============== è‡ªåŠ¨åˆ·æ–°åŠŸèƒ½ ==============

      /**
       * æ›´æ–°å€’è®¡æ—¶æ˜¾ç¤º
       */
      function updateCountdown() {
        countdownTime.textContent = remainingSeconds;
        remainingSeconds--;

        if (remainingSeconds < 0) {
          // æ—¶é—´åˆ°ï¼Œæ£€æŸ¥æ˜¯å¦å¯ä»¥æ‰§è¡Œåˆ·æ–°
          if (!isFetching) {
            // æ ‡è®°ä¸ºè‡ªåŠ¨åˆ·æ–°è§¦å‘
            isAutoRefreshTriggered = true;
            fetchRSS();
          }
          // é‡ç½®å€’è®¡æ—¶ï¼ˆæ— è®ºæ˜¯å¦è§¦å‘åˆ·æ–°ï¼‰
          remainingSeconds = AUTO_REFRESH_INTERVAL;
        }
      }

      /**
       * å¯åŠ¨è‡ªåŠ¨åˆ·æ–°
       */
      async function startAutoRefresh() {
        // å…ˆåœæ­¢ç°æœ‰çš„å®šæ—¶å™¨
        if (countdownTimer) {
          stopAutoRefresh();
        }

        // è¯·æ±‚æµè§ˆå™¨é€šçŸ¥æƒé™
        await requestNotificationPermission();

        // æ˜¾ç¤ºå€’è®¡æ—¶ï¼ˆä½¿ç”¨ CSS ç±»æ§åˆ¶ï¼‰
        countdownDisplay.classList.add("active");
        remainingSeconds = AUTO_REFRESH_INTERVAL;
        countdownTime.textContent = remainingSeconds;

        // å¯åŠ¨å€’è®¡æ—¶å®šæ—¶å™¨ï¼ˆæ¯ç§’æ›´æ–°ä¸€æ¬¡ï¼‰
        countdownTimer = setInterval(updateCountdown, 1000);
      }

      /**
       * åœæ­¢è‡ªåŠ¨åˆ·æ–°
       */
      function stopAutoRefresh() {
        if (countdownTimer) {
          clearInterval(countdownTimer);
          countdownTimer = null;
        }

        // éšè—å€’è®¡æ—¶ï¼ˆä½¿ç”¨ CSS ç±»æ§åˆ¶ï¼‰
        countdownDisplay.classList.remove("active");
        remainingSeconds = AUTO_REFRESH_INTERVAL;
      }

      /**
       * åˆ‡æ¢è‡ªåŠ¨åˆ·æ–°çŠ¶æ€
       */
      function toggleAutoRefresh() {
        if (autoRefreshToggle.checked) {
          startAutoRefresh();
        } else {
          stopAutoRefresh();
        }
      }

      // ============== å·¥å…·å‡½æ•° ==============

      /**
       * HTML è½¬ä¹‰ï¼Œé˜²æ­¢ XSS
       */
      function escapeHtml(text) {
        const div = document.createElement("div");
        div.textContent = text;
        return div.innerHTML;
      }

      /**
       * è½¬ä¹‰æ­£åˆ™è¡¨è¾¾å¼ç‰¹æ®Šå­—ç¬¦
       */
      function escapeRegExp(string) {
        return string.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
      }

      /**
       * æ ¼å¼åŒ–æ—¥æœŸ
       */
      function formatDate(dateString) {
        if (!dateString) return "æœªçŸ¥æ—¥æœŸ";

        try {
          const date = new Date(dateString);
          const now = new Date();
          const diffMs = now - date;
          const diffMins = Math.floor(diffMs / 60000);
          const diffHours = Math.floor(diffMs / 3600000);
          const diffDays = Math.floor(diffMs / 86400000);

          // ç›¸å¯¹æ—¶é—´æ˜¾ç¤º
          if (diffMins < 1) return "åˆšåˆš";
          if (diffMins < 60) return `${diffMins} åˆ†é’Ÿå‰`;
          if (diffHours < 24) return `${diffHours} å°æ—¶å‰`;
          if (diffDays < 7) return `${diffDays} å¤©å‰`;

          // ç»å¯¹æ—¶é—´æ˜¾ç¤º
          return date.toLocaleDateString("zh-CN", {
            year: "numeric",
            month: "long",
            day: "numeric",
            hour: "2-digit",
            minute: "2-digit",
          });
        } catch (error) {
          return dateString;
        }
      }

      // ============== äº‹ä»¶ç›‘å¬ ==============

      // æ·»åŠ å…³é”®è¯æŒ‰é’®ç‚¹å‡»
      addKeywordBtn.addEventListener("click", addKeyword);

      // è¾“å…¥æ¡†å›è½¦é”®
      keywordInput.addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
          addKeyword();
        }
      });

      // åˆ·æ–°æŒ‰é’®ç‚¹å‡»
      refreshBtn.addEventListener("click", fetchRSS);

      // å…³é”®è¯åˆ é™¤æŒ‰é’®ç‚¹å‡»ï¼ˆäº‹ä»¶å§”æ‰˜ï¼‰
      keywordsContainer.addEventListener("click", (e) => {
        if (e.target.classList.contains("remove-btn")) {
          const index = parseInt(e.target.dataset.keywordIndex, 10);
          if (!isNaN(index) && index >= 0 && index < keywords.length) {
            const keyword = keywords[index];
            removeKeyword(keyword);
          }
        }
      });

      // è‡ªåŠ¨åˆ·æ–°å¼€å…³åˆ‡æ¢
      autoRefreshToggle.addEventListener("change", toggleAutoRefresh);

      // ============== åˆå§‹åŒ– ==============

      // é¡µé¢åŠ è½½æ—¶ä» localStorage è¯»å–æ•°æ®
      loadKeywords();
      loadNotifiedPostIds();

      // æ˜¾ç¤ºåˆå§‹ç©ºçŠ¶æ€
      postsContainer.innerHTML = `
            <div class="empty-state">
                <div class="empty-state-icon">ğŸ””</div>
                <div class="empty-state-title">å¼€å§‹ç›‘æ§æ‚¨å…³æ³¨çš„å†…å®¹</div>
                <div class="empty-state-text">è¯·å…ˆåœ¨ä¸Šæ–¹æ·»åŠ è‡³å°‘ä¸€ä¸ªå…³é”®è¯ï¼Œç„¶åç‚¹å‡»ã€Œåˆ·æ–°å¸–å­ã€æŒ‰é’®è·å–åŒ¹é…çš„æœ€æ–°å†…å®¹</div>
            </div>
        `;

      // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨èšç„¦åˆ°è¾“å…¥æ¡†
      keywordInput.focus();
    </script>
  </body>
</html>
